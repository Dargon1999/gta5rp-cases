<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GTA‚ÄØ5‚ÄØRP Blackberry ‚Äî –ö–µ–π—Å—ã</title>
  <style>
    /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
    body { margin:0; background: linear-gradient(270deg,#1e664c,#3ebd91,#1e664c); background-size:600% 600%; animation:bgShift 20s ease infinite; font-family:'Segoe UI',sans-serif; color:#fff;}
    @keyframes bgShift{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}
    #app{max-width:960px;margin:40px auto;padding:30px;background:rgba(0,0,0,0.6);border-radius:12px;}
    header{text-align:center;font-size:2.4rem;font-weight:700;margin-bottom:20px;}
    nav{text-align:center;margin-bottom:20px;}
    nav button{margin:0 8px;padding:10px 16px;border:none;border-radius:8px;background:#12c56b;color:#fff;font-weight:700;cursor:pointer;transition:0.3s;}
    nav button:hover{background:#0ea25d;transform:scale(1.05);}
    #taskBox{padding:20px;background:rgba(0,0,0,0.5);border-radius:8px;min-height:120px;text-align:center;font-size:1.2rem;margin-bottom:20px;animation:fadeIn 0.7s;}
    @keyframes fadeIn{0{opacity:0}100%{opacity:1}}
    .cases{display:flex;gap:15px;justify-content:center;flex-wrap:wrap;margin-bottom:20px;}
    .case{width:120px;height:120px;background:#0b3f2c;border-radius:8px;display:flex;justify-content:center;align-items:center;color:#fff;font-weight:700;cursor:pointer;position:relative;transition:transform 0.3s;}
    .case:hover{transform:scale(1.05);}
    table{width:100%;border-collapse:collapse;background:rgba(0,0,0,0.4);border-radius:8px;overflow:hidden;}
    th,td{padding:12px;text-align:center;border-bottom:1px solid #12c56b;}
    th{background:#12c56b;}
    tbody tr:hover{background:rgba(18,197,107,0.2);}
  </style>
</head>
<body>
  <div id="app">
    <header>GTA‚ÄØ5‚ÄØRP Blackberry ‚Äî –ö–µ–π—Å—ã</header>
    <nav>
      <button id="btnGet">–ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
      <button id="btnOpenCase">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å (1000 –æ—á–∫–æ–≤)</button>
      <button id="btnLogout">–í—ã–π—Ç–∏</button>
    </nav>
    <div id="taskBox">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ.</div>
    <div class="cases">
      <div class="case" id="case1">–ö–µ–π—Å üéÅ</div>
      <div class="case" id="case2">–ö–µ–π—Å üéÅ</div>
      <div class="case" id="case3">–ö–µ–π—Å üéÅ</div>
    </div>
    <h3>–†–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</h3>
    <table>
      <thead><tr><th>–ù–∏–∫–Ω–µ–π–º</th><th>–ë–∞–ª–ª—ã</th><th>–ó–∞–¥–∞–Ω–∏—è</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
      <tbody id="rating"></tbody>
    </table>
  </div>

  <script>
    const DISCORD_WEBHOOK='https://discord.com/api/webhooks/...';
    const TASKS=[{text:"–û–±—ã—Å–∫ –∑–µ–∫–æ–≤ 30",points:30},{text:"–û—Ç—Å—Ç–æ—è—Ç—å –ö–ü–ü 2—á",points:120}/*‚Ä¶*/];
    let current= sessionStorage.getItem('currentUser');
    if(!current){location.href='index.html'; return;}
    let users=JSON.parse(localStorage.getItem('users')||'{}');
    let stats=JSON.parse(localStorage.getItem('stats')||'{}');
    if(!stats[current]) stats[current]={points:0,count:0,status:'–∞–∫—Ç–∏–≤–µ–Ω'};
    localStorage.setItem('stats',JSON.stringify(stats));
    document.getElementById('btnLogout').onclick=()=>{
      sessionStorage.removeItem('currentUser');
      location.href='index.html';
    };
    function renderRating(){
      const tbody=document.getElementById('rating');
      tbody.innerHTML='';
      Object.entries(stats).sort((a,b)=>b[1].points-a[1].points).forEach(([u,d])=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${u}</td><td>${d.points}</td><td>${d.count}</td><td>${d.status}</td>`;
        tbody.appendChild(tr);
      });
    }
    async function sendDiscord(name,pts){
      await fetch(DISCORD_WEBHOOK,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({content:`–ò–≥—Ä–æ–∫ **${name}** –∑–∞—Ä–∞–±–æ—Ç–∞–ª **${pts}** –æ—á–∫–æ–≤`})});
    }
    document.getElementById('btnGet').onclick= async ()=>{
      const t=TASKS[Math.floor(Math.random()*TASKS.length)];
      document.getElementById('taskBox').textContent=`–ó–∞–¥–∞–Ω–∏–µ: ${t.text} (+${t.points} –æ—á–∫–æ–≤)`;
      stats[current].points+=t.points;
      stats[current].count+=1;
      localStorage.setItem('stats',JSON.stringify(stats));
      renderRating(); await sendDiscord(current,t.points);
    };
    document.getElementById('btnOpenCase').onclick=()=>{
      if(stats[current].points<1000){alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—á–∫–æ–≤'); return;}
      stats[current].points-=1000;
      stats[current].count+=1;
      stats[current].status='–∫–µ–π—Å –æ—Ç–∫—Ä—ã—Ç';
      localStorage.setItem('stats',JSON.stringify(stats));
      renderRating();
      document.getElementById('taskBox').textContent='–í—ã –æ—Ç–∫—Ä—ã–ª–∏ –∫–µ–π—Å üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!';
    };
    renderRating();
  </script>
</body>
</html>
