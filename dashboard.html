<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GTA5 RP Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXX');
  </script>
</head>
<body class="bg-gray-900 text-white font-sans">
  <section class="container mx-auto p-4 fade-in">
    <h1 class="text-4xl font-bold text-center mb-6 neon-text">GTA5 RP Кейсы</h1>
    <p class="text-center mb-4">Получай задания, выполняй их, открывай кейсы и выиграй автомобиль!</p>
    <div id="userButtons" class="text-center">
      <button id="getTaskButton" onclick="showTaskForm()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-2 button-neon">Получить задание</button>
      <button onclick="showCasesModal()" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded mr-2 button-neon">Кейсы</button>
      <a href="#adminPanel" id="adminPanelButton" class="hidden bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded mr-2 button-neon">Админ-панель</a>
      <button onclick="logout()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded button-neon">Выйти</button>
    </div>
    <div id="currentTask" class="hidden mt-4 text-center fade-in">
      <p id="taskText" class="text-lg"></p>
      <p id="taskTimer" class="text-sm text-gray-400"></p>
      <div id="reportForm" class="mt-4">
        <input type="url" id="reportProof" placeholder="Ссылка на доказательство (Discord/Imgur, png/jpg/mp4)" class="w-full p-2 mb-4 bg-gray-700 rounded" required>
        <button onclick="submitReport()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full button-neon">Отправить отчёт</button>
      </div>
      <p id="nextTaskTimer" class="hidden mt-2 text-sm text-gray-400"></p>
    </div>
  </section>

  <!-- Форма получения задания -->
  <div id="taskForm" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center fade-in">
    <div class="bg-gray-800 p-6 rounded-lg w-full max-w-md neon-box">
      <h2 class="text-2xl mb-4 neon-text">Получить задание</h2>
      <form id="getTaskForm">
        <input type="text" id="nickname" placeholder="Никнейм" class="w-full p-2 mb-4 bg-gray-700 rounded" readonly>
        <input type="text" id="discord" placeholder="Discord" class="w-full p-2 mb-4 bg-gray-700 rounded" readonly>
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full button-neon">Сгенерировать задание</button>
      </form>
      <button onclick="closeTaskForm()" class="mt-4 text-red-500">Закрыть</button>
    </div>
  </div>

  <!-- Кейсы -->
  <div id="casesModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center fade-in">
    <div class="bg-gray-800 p-6 rounded-lg w-full max-w-4xl neon-box">
      <h2 class="text-2xl mb-4 neon-text">Ваши кейсы</h2>
      <p id="currentPoints" class="mb-4"></p>
      <div id="casesList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
      <p id="mainPrize" class="hidden text-green-400 font-bold mt-4"></p>
      <button onclick="closeCasesModal()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded w-full mt-4 button-neon">Закрыть</button>
    </div>
  </div>

  <!-- Таблица рейтинга -->
  <section class="container mx-auto p-4 fade-in">
    <h2 class="text-2xl font-bold mb-4 neon-text">Рейтинг участников</h2>
    <table class="w-full text-left neon-table">
      <thead>
        <tr class="bg-gray-800">
          <th class="p-2">Ник</th>
          <th class="p-2">Очки</th>
          <th class="p-2">Задания</th>
          <th class="p-2">Статус</th>
        </tr>
      </thead>
      <tbody id="leaderboard"></tbody>
    </table>
  </section>

  <!-- Админ-панель -->
  <section id="adminPanel" class="container mx-auto p-4 fade-in hidden">
    <h2 class="text-2xl mb-4 neon-text">Админ-панель</h2>
    <h3 class="text-xl mb-4 neon-text">Отчёты</h3>
    <table class="w-full text-left mb-6 neon-table">
      <thead>
        <tr class="bg-gray-800">
          <th class="p-2">Ник</th>
          <th class="p-2">Задание</th>
          <th class="p-2">Доказательство</th>
          <th class="p-2">Действия</th>
        </tr>
      </thead>
      <tbody id="adminReports"></tbody>
    </table>
    <h3 class="text-xl mb-4 neon-text">Управление игроками</h3>
    <table class="w-full text-left neon-table">
      <thead>
        <tr class="bg-gray-800">
          <th class="p-2">Ник</th>
          <th class="p-2">Очки</th>
          <th class="p-2">Действия</th>
        </tr>
      </thead>
      <tbody id="adminPlayers"></tbody>
    </table>
    <h3 class="text-xl mt-6 mb-4 neon-text">Дополнительные очки</h3>
    <div class="mb-4">
      <select id="extraPointsType" class="p-2 bg-gray-700 rounded mr-2">
        <option value="1000_judgement">Суд (1000 очков)</option>
        <option value="500_raid">Рейд (500 очков)</option>
        <option value="1000_material">Мат. благо (1000 очков)</option>
      </select>
      <input type="text" id="extraPointsNickname" placeholder="Никнейм игрока" class="p-2 bg-gray-700 rounded mr-2">
      <button onclick="awardExtraPoints()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded button-neon">Начислить</button>
    </div>
  </section>

  <script src="scripts.js"></script>
</body>
</html>
